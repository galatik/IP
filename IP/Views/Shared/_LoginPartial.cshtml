@using Microsoft.AspNetCore.Identity
@using DevExtreme.AspNet.Mvc
@inject SignInManager<IdentityUser> SignInManager
@inject UserManager<IdentityUser> UserManager

<ul class="navbar-nav">
    @if (SignInManager.IsSignedIn(User))
    {
        @(Html.DevExtreme().DropDownButton()
            .Icon("menu")
            .Items(i =>
            {
                i.Add().Text("Мои заказы");
                i.Add().Text("Баланс");
                i.Add().Text("Профиль");
                i.Add().Text("Выйти");
            }))
    }
    else
    {
        @(Html.DevExtreme().DropDownButton()
            .Icon("user")
            .Items(i =>
            {
                i.Add().Icon("home").Text("Войти").OnClick("() => $('#login-popup').dxPopup('instance').show()");
                i.Add().Icon("user").Text("Зарегистрироваться").OnClick("() => $('#register-popup').dxPopup('instance').show()");
            })
            .OnItemClick("eventHandlers.onLoginButtonClicked"))
    }
</ul>
@(Html.DevExtreme().Popup()
    .Container("main")
    .ID("login-popup")
    .ShowTitle(true)
    .Title("Войти")
    .Visible(false)
    .DragEnabled(false)
    .CloseOnOutsideClick(true))
@(Html.DevExtreme().Popup()
    .Container("main")
    .ID("register-popup")
    .ShowTitle(true)
    .Title("Зарегистрироваться")
    .Visible(false)
    .DragEnabled(false)
    .CloseOnOutsideClick(true)
    )