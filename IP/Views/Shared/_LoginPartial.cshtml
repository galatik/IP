@using Microsoft.AspNetCore.Identity
@using DevExtreme.AspNet.Mvc
@inject SignInManager<IdentityUser> SignInManager
@inject UserManager<IdentityUser> UserManager

<ul class="navbar-nav">
    @if (SignInManager.IsSignedIn(User))
    {
        @(Html.DevExtreme().DropDownButton()
            .Icon("menu")
            .Items(i =>
            {
                i.Add().Text("Мои заказы");
                i.Add().Text("Баланс");
                i.Add().Text("Профиль");
                i.Add().Text("Выйти");
            }))
    }
    else
    {
        @(Html.DevExtreme().DropDownButton()
            .DisplayExpr("Text")
            .DataSource(new[]
            {
                new DropDownItemViewModel
                {
                    Text = "Войти", 
                    icon = "home"
                },
                new DropDownItemViewModel
                {
                    Text = "Зарегистрироваться", 
                    icon = "user"
                }
            })
            .Icon("user")
            .OnItemClick("eventHandlers.onLoginButtonClicked")
            .DropDownOptions(options => options.Width(180)))
    }
</ul>
@(Html.DevExtreme().Popup()
    .Container("main")
    .ID("login-popup")
    .ShowTitle(true)
    .Title("Войти")
    .Visible(false)
    
    .Content(@<text>
                 @await Html.PartialAsync("/Views/Account/_Login.cshtml")
              </text>)
    .DragEnabled(false)
    .CloseOnOutsideClick(true))
@(Html.DevExtreme().Popup()
    .Container("main")
    .ID("register-popup")
    .ShowTitle(true)
    .Title("Зарегистрироваться")
    .Visible(false)
    .Content(@<text>
                 @await Html.PartialAsync("/Views/Account/_Register.cshtml")
              </text>)
    .DragEnabled(false)
    .CloseOnOutsideClick(true)
    )